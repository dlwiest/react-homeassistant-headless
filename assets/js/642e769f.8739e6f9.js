"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[60],{8453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>l});var t=i(6540);const s={},r=t.createContext(s);function c(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(r.Provider,{value:n},e.children)}},9202:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"advanced/custom-service-calls","title":"Custom Service Calls","description":"Make direct Home Assistant service calls for advanced use cases not covered by entity-specific hooks.","source":"@site/docs/advanced/custom-service-calls.md","sourceDirName":"advanced","slug":"/advanced/custom-service-calls","permalink":"/docs/advanced/custom-service-calls","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/advanced/custom-service-calls.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Working with Multiple Entities","permalink":"/docs/advanced/multiple-entities"},"next":{"title":"Error Handling & Connection Status","permalink":"/docs/error-handling"}}');var s=i(4848),r=i(8453);const c={sidebar_position:2},l="Custom Service Calls",o={},a=[{value:"Overview",id:"overview",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"API Reference",id:"api-reference",level:2},{value:"<code>useServiceCall()</code>",id:"useservicecall",level:3},{value:"<code>callService(domain, service, data?)</code>",id:"callservicedomain-service-data",level:4},{value:"<code>callServiceWithResponse&lt;R&gt;(domain, service, data?)</code>",id:"callservicewithresponserdomain-service-data",level:4},{value:"Examples",id:"examples",level:2},{value:"Control Multiple Entities",id:"control-multiple-entities",level:3},{value:"Service with Response",id:"service-with-response",level:3},{value:"Trigger Automation",id:"trigger-automation",level:3},{value:"Send Notification",id:"send-notification",level:3},{value:"Combine with Entity Hooks",id:"combine-with-entity-hooks",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Configuration",id:"configuration",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"custom-service-calls",children:"Custom Service Calls"})}),"\n",(0,s.jsx)(n.p,{children:"Make direct Home Assistant service calls for advanced use cases not covered by entity-specific hooks."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"useServiceCall"})," hook provides access to Home Assistant's raw service call API, allowing you to call any service with custom parameters. This is useful when:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"You need to call services not covered by entity-specific hooks"}),"\n",(0,s.jsx)(n.li,{children:"You want to control multiple entities with a single service call"}),"\n",(0,s.jsx)(n.li,{children:"You're working with custom integrations or scripts"}),"\n",(0,s.jsx)(n.li,{children:"You need fine-grained control over service parameters"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useServiceCall } from 'hass-react'\n\nfunction CustomControl() {\n  const { callService } = useServiceCall()\n\n  const handleAction = async () => {\n    await callService('light', 'turn_on', {\n      entity_id: 'light.living_room',\n      brightness: 255,\n      rgb_color: [255, 0, 0]\n    })\n  }\n\n  return <button onClick={handleAction}>Red Light</button>\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(n.h3,{id:"useservicecall",children:(0,s.jsx)(n.code,{children:"useServiceCall()"})}),"\n",(0,s.jsx)(n.p,{children:"Returns an object with service call methods:"}),"\n",(0,s.jsx)(n.h4,{id:"callservicedomain-service-data",children:(0,s.jsx)(n.code,{children:"callService(domain, service, data?)"})}),"\n",(0,s.jsx)(n.p,{children:"Make a service call without expecting a response."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"domain"})," (string) - Service domain (e.g., 'light', 'switch', 'homeassistant')"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"service"})," (string) - Service name (e.g., 'turn_on', 'toggle', 'restart')"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data"})," (object, optional) - Service data including entity_id and other parameters"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<void>"})]}),"\n",(0,s.jsx)(n.h4,{id:"callservicewithresponserdomain-service-data",children:(0,s.jsx)(n.code,{children:"callServiceWithResponse<R>(domain, service, data?)"})}),"\n",(0,s.jsx)(n.p,{children:"Make a service call and return the response."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"domain"})," (string) - Service domain"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"service"})," (string) - Service name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data"})," (object, optional) - Service data"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Returns:"})," ",(0,s.jsx)(n.code,{children:"Promise<R>"})," - The service response"]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.h3,{id:"control-multiple-entities",children:"Control Multiple Entities"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function RoomControl() {\n  const { callService } = useServiceCall()\n\n  const allLightsOn = async () => {\n    await callService('light', 'turn_on', {\n      entity_id: ['light.living_room', 'light.kitchen', 'light.bedroom'],\n      brightness: 200\n    })\n  }\n\n  const allLightsOff = async () => {\n    await callService('light', 'turn_off', {\n      entity_id: ['light.living_room', 'light.kitchen', 'light.bedroom']\n    })\n  }\n\n  return (\n    <div>\n      <button onClick={allLightsOn}>All Lights On</button>\n      <button onClick={allLightsOff}>All Lights Off</button>\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"service-with-response",children:"Service with Response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function SystemInfo() {\n  const { callServiceWithResponse } = useServiceCall()\n  const [config, setConfig] = useState(null)\n\n  const getConfig = async () => {\n    const response = await callServiceWithResponse('homeassistant', 'check_config')\n    setConfig(response)\n  }\n\n  return (\n    <div>\n      <button onClick={getConfig}>Check Config</button>\n      {config && <pre>{JSON.stringify(config, null, 2)}</pre>}\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"trigger-automation",children:"Trigger Automation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function AutomationTrigger() {\n  const { callService } = useServiceCall()\n\n  const triggerAutomation = async () => {\n    await callService('automation', 'trigger', {\n      entity_id: 'automation.morning_routine',\n      skip_condition: true\n    })\n  }\n\n  return <button onClick={triggerAutomation}>Run Morning Routine</button>\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"send-notification",children:"Send Notification"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function NotificationSender() {\n  const { callService } = useServiceCall()\n  const [message, setMessage] = useState('')\n\n  const sendNotification = async () => {\n    await callService('notify', 'mobile_app_my_phone', {\n      message: message,\n      title: 'Custom Notification',\n      data: {\n        push: {\n          sound: 'default'\n        }\n      }\n    })\n    setMessage('')\n  }\n\n  return (\n    <div>\n      <input\n        value={message}\n        onChange={(e) => setMessage(e.target.value)}\n        placeholder=\"Enter message\"\n      />\n      <button onClick={sendNotification}>Send</button>\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"combine-with-entity-hooks",children:"Combine with Entity Hooks"}),"\n",(0,s.jsxs)(n.p,{children:["You can mix ",(0,s.jsx)(n.code,{children:"useServiceCall"})," with entity-specific hooks:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function HybridControl() {\n  const { callService } = useServiceCall()\n  const light = useLight('light.living_room')\n\n  // Use entity hook for state\n  const isOn = light.isOn\n\n  // Use custom service call for advanced control\n  const customEffect = async () => {\n    await callService('light', 'turn_on', {\n      entity_id: 'light.living_room',\n      effect: 'colorloop',\n      brightness: 150\n    })\n  }\n\n  return (\n    <div>\n      <p>Light is {isOn ? 'on' : 'off'}</p>\n      <button onClick={customEffect}>Color Loop</button>\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.p,{children:"Service calls include automatic retry logic with exponential backoff:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"function RobustControl() {\n  const { callService } = useServiceCall()\n  const [error, setError] = useState(null)\n\n  const handleAction = async () => {\n    try {\n      setError(null)\n      await callService('light', 'turn_on', {\n        entity_id: 'light.living_room'\n      })\n    } catch (err) {\n      setError(err.message)\n    }\n  }\n\n  return (\n    <div>\n      <button onClick={handleAction}>Turn On</button>\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n    </div>\n  )\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Retry behavior can be configured in the ",(0,s.jsx)(n.code,{children:"HAProvider"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<HAProvider\n  url="http://homeassistant.local:8123"\n  options={{\n    serviceRetry: {\n      maxAttempts: 5,\n      baseDelay: 500,\n      exponentialBackoff: true,\n      maxDelay: 10000\n    }\n  }}\n>\n  <App />\n</HAProvider>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["Use ",(0,s.jsx)(n.code,{children:"useServiceCall"})," when:"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Calling services on multiple entities at once"}),"\n",(0,s.jsx)(n.li,{children:"Working with custom integrations"}),"\n",(0,s.jsx)(n.li,{children:"Triggering automations or scripts"}),"\n",(0,s.jsx)(n.li,{children:"Sending notifications"}),"\n",(0,s.jsx)(n.li,{children:"Calling services not covered by entity hooks"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use entity-specific hooks when:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Working with a single entity"}),"\n",(0,s.jsx)(n.li,{children:"You need reactive state updates"}),"\n",(0,s.jsx)(n.li,{children:"The entity type has a dedicated hook"}),"\n",(0,s.jsx)(n.li,{children:"You want type-safe methods and attributes"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Service calls are not entity-specific, so you must specify ",(0,s.jsx)(n.code,{children:"entity_id"})," in the data"]}),"\n",(0,s.jsx)(n.li,{children:"The hook automatically includes retry logic for failed calls"}),"\n",(0,s.jsxs)(n.li,{children:["Errors are thrown as ",(0,s.jsx)(n.code,{children:"ServiceCallError"})," or ",(0,s.jsx)(n.code,{children:"ConnectionError"})]}),"\n",(0,s.jsx)(n.li,{children:"Service calls don't automatically update entity state - use entity hooks for reactive updates"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);