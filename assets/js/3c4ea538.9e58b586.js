"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1171],{410:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"entities/camera","title":"Camera","description":"View camera images and streams with support for HLS, MJPEG, and WebRTC streaming.","source":"@site/docs/entities/camera.md","sourceDirName":"entities","slug":"/entities/camera","permalink":"/docs/entities/camera","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/entities/camera.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Alarm Control Panel","permalink":"/docs/entities/alarm-control-panel"},"next":{"title":"Lock","permalink":"/docs/entities/lock"}}');var t=r(4848),s=r(8453);const i={},o="Camera",c={},l=[{value:"Quick Example",id:"quick-example",level:2},{value:"Streamlined API",id:"streamlined-api",level:2},{value:"Camera.Image",id:"cameraimage",level:3},{value:"Camera.StreamPlayer",id:"camerastreamplayer",level:3},{value:"Hook API",id:"hook-api",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"State Properties",id:"state-properties",level:4},{value:"Image and Stream Properties",id:"image-and-stream-properties",level:4},{value:"Camera Information",id:"camera-information",level:4},{value:"Feature Support",id:"feature-support",level:4},{value:"Control Methods",id:"control-methods",level:4},{value:"Streaming Methods",id:"streaming-methods",level:4},{value:"Entity Properties",id:"entity-properties",level:4},{value:"Component API",id:"component-api",level:2},{value:"Basic Usage",id:"basic-usage-1",level:3},{value:"Examples",id:"examples",level:2},{value:"Simple Image Display",id:"simple-image-display",level:3},{value:"Stream Toggle",id:"stream-toggle",level:3},{value:"Stream Type Selection",id:"stream-type-selection",level:3},{value:"Motion Detection Control",id:"motion-detection-control",level:3},{value:"Recording Control",id:"recording-control",level:3},{value:"Full Camera Control Panel",id:"full-camera-control-panel",level:3},{value:"Advanced: Custom Stream Player",id:"advanced-custom-stream-player",level:3},{value:"Using Component API",id:"using-component-api",level:3},{value:"Stream Types",id:"stream-types",level:2},{value:"MJPEG",id:"mjpeg",level:3},{value:"HLS (HTTP Live Streaming)",id:"hls-http-live-streaming",level:3},{value:"WebRTC",id:"webrtc",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Stream Not Working",id:"stream-not-working",level:3},{value:"Image Not Loading",id:"image-not-loading",level:3},{value:"Force Image Refresh",id:"force-image-refresh",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"camera",children:"Camera"})}),"\n",(0,t.jsx)(n.p,{children:"View camera images and streams with support for HLS, MJPEG, and WebRTC streaming."}),"\n",(0,t.jsx)(n.h2,{id:"quick-example",children:"Quick Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera, useCamera } from 'hass-react'\n\n// Streamlined approach with compound components\nfunction CameraView() {\n  const camera = useCamera('camera.front_door')\n\n  return (\n    <div>\n      {camera.streamState.isActive ? (\n        <Camera.StreamPlayer stream={camera.streamState} />\n      ) : (\n        <Camera.Image url={camera.imageUrl} />\n      )}\n\n      <button onClick={() => camera.startStream({ type: 'mjpeg' })}>\n        Start Stream\n      </button>\n      {camera.streamState.isActive && (\n        <button onClick={camera.stopStream}>Stop Stream</button>\n      )}\n    </div>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"streamlined-api",children:"Streamlined API"}),"\n",(0,t.jsx)(n.p,{children:"The Camera module provides compound components for common use cases:"}),"\n",(0,t.jsx)(n.h3,{id:"cameraimage",children:"Camera.Image"}),"\n",(0,t.jsx)(n.p,{children:"Display a static camera image with automatic error handling."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera } from 'hass-react'\n\n<Camera.Image\n  url={camera.imageUrl}\n  alt=\"Front door camera\"\n  className=\"camera-image\"\n  onError={() => console.log('Image failed to load')}\n/>\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Props:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"url"})})," (",(0,t.jsx)(n.code,{children:"string | null"}),") - Image URL"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"alt"})})," (",(0,t.jsx)(n.code,{children:"string"}),') - Alt text (default: "Camera image")']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"style"})})," (",(0,t.jsx)(n.code,{children:"CSSProperties"}),") - Custom styles"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"className"})})," (",(0,t.jsx)(n.code,{children:"string"}),") - CSS class name"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"onError"})})," (",(0,t.jsx)(n.code,{children:"() => void"}),") - Error callback"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"camerastreamplayer",children:"Camera.StreamPlayer"}),"\n",(0,t.jsx)(n.p,{children:"Display a live camera stream (HLS, MJPEG, or WebRTC)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera, useCamera } from 'hass-react'\n\nfunction LiveStream() {\n  const camera = useCamera('camera.backyard')\n\n  return (\n    <Camera.StreamPlayer\n      stream={camera.streamState}\n      autoPlay={true}\n      muted={true}\n      controls={true}\n      className=\"camera-stream\"\n    />\n  )\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Props:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"stream"})})," (",(0,t.jsx)(n.code,{children:"StreamState"}),") - Stream state object from ",(0,t.jsx)(n.code,{children:"useCamera"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"autoPlay"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Auto-play video (default: ",(0,t.jsx)(n.code,{children:"true"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"muted"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Mute audio (default: ",(0,t.jsx)(n.code,{children:"true"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"controls"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Show video controls (default: ",(0,t.jsx)(n.code,{children:"true"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"style"})})," (",(0,t.jsx)(n.code,{children:"CSSProperties"}),") - Custom styles"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"className"})})," (",(0,t.jsx)(n.code,{children:"string"}),") - CSS class name"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"hook-api",children:"Hook API"}),"\n",(0,t.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useCamera } from 'hass-react'\n\nfunction MyComponent() {\n  const camera = useCamera('camera.front_door')\n\n  return <div>{camera.isOn ? 'ON' : 'OFF'}</div>\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"useCamera"})," hook returns an object with the following properties and methods:"]}),"\n",(0,t.jsx)(n.h4,{id:"state-properties",children:"State Properties"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"isOn"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Whether the camera is currently on"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"isRecording"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Whether the camera is recording"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"isStreaming"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Whether the camera is streaming"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"isIdle"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Whether the camera is idle"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"motionDetectionEnabled"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Motion detection status"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"image-and-stream-properties",children:"Image and Stream Properties"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"imageUrl"})})," (",(0,t.jsx)(n.code,{children:"string | null"}),") - URL for static camera image with authentication token"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"streamState"})})," (",(0,t.jsx)(n.code,{children:"StreamState"}),") - Current stream state with properties:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"isLoading"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Stream is being loaded"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"isActive"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Stream is active"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"error"})})," (",(0,t.jsx)(n.code,{children:"Error | null"}),") - Stream error if any"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"url"})})," (",(0,t.jsx)(n.code,{children:"string | null"}),") - Stream URL"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"type"})})," (",(0,t.jsx)(n.code,{children:"'hls' | 'mjpeg' | 'webrtc' | null"}),") - Stream type"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"accessToken"})})," (",(0,t.jsx)(n.code,{children:"string"}),") - Authentication token for camera API"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"camera-information",children:"Camera Information"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"brand"})})," (",(0,t.jsx)(n.code,{children:"string"}),") - Camera brand"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"model"})})," (",(0,t.jsx)(n.code,{children:"string"}),") - Camera model"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"feature-support",children:"Feature Support"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"supportsOnOff"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Camera supports turning on/off"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"supportsStream"})})," (",(0,t.jsx)(n.code,{children:"boolean"}),") - Camera supports streaming"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"control-methods",children:"Control Methods"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"turnOn()"})})," - Turn camera on (if supported)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"turnOff()"})})," - Turn camera off (if supported)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"enableMotionDetection()"})})," - Enable motion detection"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"disableMotionDetection()"})})," - Disable motion detection"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"snapshot()"})})," - Take a snapshot"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"record(filename?: string, duration?: number)"})})," - Start recording"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"refreshImage()"})})," - Force refresh the camera image"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"streaming-methods",children:"Streaming Methods"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"getStreamUrl(options?: StreamOptions)"})})," - Get stream URL without starting playback","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"options.type"}),": ",(0,t.jsx)(n.code,{children:"'hls' | 'mjpeg' | 'webrtc'"})," (default: ",(0,t.jsx)(n.code,{children:"'hls'"}),")"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"startStream(options?: StreamOptions)"})})," - Start streaming","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"options.type"}),": ",(0,t.jsx)(n.code,{children:"'hls' | 'mjpeg' | 'webrtc'"})," (default: ",(0,t.jsx)(n.code,{children:"'hls'"}),")"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"stopStream()"})})," - Stop streaming"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"retryStream()"})})," - Retry last failed stream"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"playStream(mediaPlayer?: string)"})})," - Play stream on a media player"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"entity-properties",children:"Entity Properties"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"entityId"})})," (",(0,t.jsx)(n.code,{children:"string"}),") - The entity ID"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"state"})})," (",(0,t.jsx)(n.code,{children:"string"}),") - Raw state value from Home Assistant"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"attributes"})})," (",(0,t.jsx)(n.code,{children:"object"}),") - All entity attributes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"lastChanged"})})," (",(0,t.jsx)(n.code,{children:"Date"}),") - When the entity last changed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"lastUpdated"})})," (",(0,t.jsx)(n.code,{children:"Date"}),") - When the entity was last updated"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"component-api",children:"Component API"}),"\n",(0,t.jsx)(n.h3,{id:"basic-usage-1",children:"Basic Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera } from 'hass-react'\n\n<Camera entityId=\"camera.front_door\">\n  {(cameraProps) => (\n    // Your UI here\n  )}\n</Camera>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The Camera component provides all the same properties and methods as the ",(0,t.jsx)(n.code,{children:"useCamera"})," hook to your render function."]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.h3,{id:"simple-image-display",children:"Simple Image Display"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera, useCamera } from 'hass-react'\n\nfunction CameraImage() {\n  const camera = useCamera('camera.front_door')\n\n  return (\n    <div>\n      <h3>Front Door</h3>\n      <Camera.Image url={camera.imageUrl} />\n      <button onClick={camera.refreshImage}>Refresh</button>\n    </div>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"stream-toggle",children:"Stream Toggle"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera, useCamera } from 'hass-react'\n\nfunction CameraStream() {\n  const camera = useCamera('camera.backyard')\n\n  return (\n    <div>\n      <h3>Backyard Camera</h3>\n\n      {camera.streamState.isActive ? (\n        <>\n          <Camera.StreamPlayer stream={camera.streamState} />\n          <button onClick={camera.stopStream}>Stop Stream</button>\n        </>\n      ) : (\n        <>\n          <Camera.Image url={camera.imageUrl} />\n          <button\n            onClick={() => camera.startStream({ type: 'mjpeg' })}\n            disabled={camera.streamState.isLoading}\n          >\n            {camera.streamState.isLoading ? 'Loading...' : 'Start Stream'}\n          </button>\n        </>\n      )}\n\n      {camera.streamState.error && (\n        <div style={{ color: 'red' }}>\n          Error: {camera.streamState.error.message}\n          <button onClick={camera.retryStream}>Retry</button>\n        </div>\n      )}\n    </div>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"stream-type-selection",children:"Stream Type Selection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera, useCamera } from 'hass-react'\n\nfunction CameraWithStreamOptions() {\n  const camera = useCamera('camera.garage')\n\n  const handleStreamStart = (type: 'hls' | 'mjpeg') => {\n    camera.startStream({ type })\n  }\n\n  return (\n    <div>\n      <h3>Garage Camera</h3>\n\n      {camera.streamState.isActive ? (\n        <>\n          <Camera.StreamPlayer stream={camera.streamState} />\n          <p>Streaming ({camera.streamState.type})</p>\n          <button onClick={camera.stopStream}>Stop</button>\n        </>\n      ) : (\n        <>\n          <Camera.Image url={camera.imageUrl} />\n          <div>\n            <button onClick={() => handleStreamStart('mjpeg')}>\n              Start MJPEG Stream\n            </button>\n            <button onClick={() => handleStreamStart('hls')}>\n              Start HLS Stream\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"motion-detection-control",children:"Motion Detection Control"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useCamera } from 'hass-react'\n\nfunction MotionDetectionControl() {\n  const camera = useCamera('camera.driveway')\n\n  const toggleMotionDetection = () => {\n    if (camera.motionDetectionEnabled) {\n      camera.disableMotionDetection()\n    } else {\n      camera.enableMotionDetection()\n    }\n  }\n\n  return (\n    <div>\n      <h3>{camera.attributes.friendly_name}</h3>\n\n      <label>\n        <input\n          type=\"checkbox\"\n          checked={camera.motionDetectionEnabled}\n          onChange={toggleMotionDetection}\n        />\n        Motion Detection\n      </label>\n\n      {camera.motionDetectionEnabled && (\n        <span style={{ color: 'green' }}>\u25cf Recording on motion</span>\n      )}\n    </div>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"recording-control",children:"Recording Control"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useCamera } from 'hass-react'\n\nfunction CameraRecorder() {\n  const camera = useCamera('camera.security')\n\n  const startRecording = () => {\n    // Record for 30 seconds\n    camera.record(undefined, 30)\n  }\n\n  return (\n    <div>\n      <h3>{camera.attributes.friendly_name}</h3>\n\n      <div>\n        Status: {camera.isRecording ? 'Recording' : 'Idle'}\n      </div>\n\n      {!camera.isRecording && (\n        <button onClick={startRecording}>\n          Record 30 seconds\n        </button>\n      )}\n\n      <button onClick={camera.snapshot}>\n        Take Snapshot\n      </button>\n    </div>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"full-camera-control-panel",children:"Full Camera Control Panel"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera, useCamera } from 'hass-react'\n\nfunction CameraPanel() {\n  const camera = useCamera('camera.main')\n\n  return (\n    <div>\n      <h2>{camera.attributes.friendly_name}</h2>\n\n      {/* Camera Info */}\n      <div>\n        {camera.brand && <p>Brand: {camera.brand}</p>}\n        {camera.model && <p>Model: {camera.model}</p>}\n        <p>Status: {camera.state}</p>\n      </div>\n\n      {/* Power Control */}\n      {camera.supportsOnOff && (\n        <div>\n          <button onClick={camera.isOn ? camera.turnOff : camera.turnOn}>\n            {camera.isOn ? 'Turn Off' : 'Turn On'}\n          </button>\n        </div>\n      )}\n\n      {/* Image/Stream Display */}\n      {camera.isOn && (\n        <div>\n          {camera.streamState.isActive ? (\n            <Camera.StreamPlayer stream={camera.streamState} />\n          ) : (\n            <Camera.Image url={camera.imageUrl} />\n          )}\n        </div>\n      )}\n\n      {/* Stream Controls */}\n      {camera.isOn && camera.supportsStream && (\n        <div>\n          {camera.streamState.isActive ? (\n            <button onClick={camera.stopStream}>Stop Stream</button>\n          ) : (\n            <>\n              <button onClick={() => camera.startStream({ type: 'mjpeg' })}>\n                MJPEG Stream\n              </button>\n              <button onClick={() => camera.startStream({ type: 'hls' })}>\n                HLS Stream\n              </button>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Stream Error */}\n      {camera.streamState.error && (\n        <div style={{ color: 'red' }}>\n          Stream Error: {camera.streamState.error.message}\n          <button onClick={camera.retryStream}>Retry</button>\n        </div>\n      )}\n\n      {/* Motion Detection */}\n      <div>\n        <label>\n          <input\n            type=\"checkbox\"\n            checked={camera.motionDetectionEnabled}\n            onChange={() => camera.motionDetectionEnabled\n              ? camera.disableMotionDetection()\n              : camera.enableMotionDetection()\n            }\n          />\n          Motion Detection\n        </label>\n      </div>\n\n      {/* Action Buttons */}\n      <div>\n        <button onClick={camera.refreshImage}>Refresh Image</button>\n        <button onClick={camera.snapshot}>Take Snapshot</button>\n        <button onClick={() => camera.record(undefined, 60)}>\n          Record 60s\n        </button>\n      </div>\n\n      <p>Last updated: {camera.lastUpdated.toLocaleTimeString()}</p>\n    </div>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"advanced-custom-stream-player",children:"Advanced: Custom Stream Player"}),"\n",(0,t.jsx)(n.p,{children:"For advanced use cases where you need full control over streaming:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useCamera } from 'hass-react'\nimport { useEffect, useRef } from 'react'\n\nfunction CustomStreamPlayer() {\n  const camera = useCamera('camera.custom')\n  const videoRef = useRef<HTMLVideoElement>(null)\n\n  // Get stream URL and manage playback manually\n  useEffect(() => {\n    const setupStream = async () => {\n      try {\n        const streamUrl = await camera.getStreamUrl({ type: 'hls' })\n        if (videoRef.current && streamUrl) {\n          videoRef.current.src = streamUrl\n          await videoRef.current.play()\n        }\n      } catch (error) {\n        console.error('Stream setup failed:', error)\n      }\n    }\n\n    setupStream()\n\n    return () => {\n      if (videoRef.current) {\n        videoRef.current.pause()\n        videoRef.current.src = ''\n      }\n    }\n  }, [camera])\n\n  return (\n    <video\n      ref={videoRef}\n      controls\n      autoPlay\n      muted\n      style={{ width: '100%' }}\n    />\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"using-component-api",children:"Using Component API"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Camera } from 'hass-react'\n\n<Camera entityId=\"camera.porch\">\n  {({ isOn, imageUrl, streamState, startStream, stopStream, refreshImage, attributes }) => (\n    <div>\n      <h3>{attributes.friendly_name}</h3>\n\n      {isOn && (\n        <>\n          {streamState.isActive ? (\n            <>\n              <Camera.StreamPlayer stream={streamState} />\n              <button onClick={stopStream}>Stop</button>\n            </>\n          ) : (\n            <>\n              <Camera.Image url={imageUrl} />\n              <button onClick={() => startStream({ type: 'mjpeg' })}>\n                Start Stream\n              </button>\n              <button onClick={refreshImage}>Refresh</button>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  )}\n</Camera>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"stream-types",children:"Stream Types"}),"\n",(0,t.jsx)(n.h3,{id:"mjpeg",children:"MJPEG"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Best compatibility"})," - Works with most cameras"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lower latency"})," - Faster than HLS"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Higher bandwidth"})," - Less efficient compression"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Recommended for:"})," Local network viewing, maximum compatibility"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"hls-http-live-streaming",children:"HLS (HTTP Live Streaming)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Better compression"})," - Lower bandwidth usage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Higher latency"})," - More delay than MJPEG"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Requires Stream integration"})," - Must be configured in Home Assistant"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Recommended for:"})," Remote access, bandwidth-constrained networks"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"webrtc",children:"WebRTC"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Lowest latency"})," - Real-time streaming"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Complex setup"})," - Requires specialized configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Not yet fully supported"})," - Consider MJPEG or HLS for now"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"stream-not-working",children:"Stream Not Working"}),"\n",(0,t.jsx)(n.p,{children:"If HLS streaming fails, try MJPEG instead:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Try MJPEG first for better compatibility\ncamera.startStream({ type: 'mjpeg' })\n"})}),"\n",(0,t.jsx)(n.p,{children:"HLS requires the Stream integration to be configured in Home Assistant. If you see errors about stream integration, use MJPEG instead."}),"\n",(0,t.jsx)(n.h3,{id:"image-not-loading",children:"Image Not Loading"}),"\n",(0,t.jsxs)(n.p,{children:["Make sure the camera entity has a valid ",(0,t.jsx)(n.code,{children:"access_token"})," and is connected:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"if (!camera.imageUrl) {\n  return <div>Camera not available</div>\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"force-image-refresh",children:"Force Image Refresh"}),"\n",(0,t.jsx)(n.p,{children:"If images appear stale, use the refresh method:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<button onClick={camera.refreshImage}>Refresh</button>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"imageUrl"})," includes automatic cache-busting to ensure fresh images."]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var a=r(6540);const t={},s=a.createContext(t);function i(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);